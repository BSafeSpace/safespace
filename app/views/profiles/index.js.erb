if (!gon.doneTutFilter) {
	gon.doneTutFilter = true;
}

$('.search-field').remove();
$('.filters-container').append('<%= j render("search_form") %>');

$('.pagination').remove()
$('.modal').remove()
$('.results-container').remove();
$('.profile-results-container').append('<%= j render("search_results") %>');

$(function() {
  $( "#slider-range" ).slider({
    range: true,
    min: 16,
    max: 60,
    values: [ $('input#q_age_gteq').val(), $('input#q_age_lteq').val() ],
    slide: function(event, ui) {
      $( "#age-range" ).val( ui.values[ 0 ] + " - " + ui.values[ 1 ] );
    },
    change: function(event, ui) {
      $('input#q_age_gteq').val(ui.values[0])
      $('input#q_age_lteq').val(ui.values[1])
    }
  });
  $( "#age-range" ).val( $( "#slider-range" ).slider( "values", 0 ) + " - " + $( "#slider-range" ).slider( "values", 1 ) );
  
});

$('#toggle-online-profiles').click(function() {
    $('input#q_online_or_all_profiles').prop('checked', !$('input#q_online_or_all_profiles').is(':checked'));
    $('input[name=commit').click();
});

$('div.users-found').html("<%= @num_profiles %> users found")

//initialize scrollbars
console.log("clicked toggle");
$('.custom-scroll').mCustomScrollbar({
    theme: "minimal-dark"
});

<% if @sort_type == "age" %>
  $('#age-sort').parent().addClass("disabled")
  $('#name-sort').click(function() {
    $('select#q_s_0_name>option:eq(2)').prop('selected', true);
    $('input[name=commit').click()
  });
<% elsif @sort_type == "name" %>
  $('#name-sort').parent().addClass("disabled")
  $('#age-sort').click(function() {
    $('select#q_s_0_name>option:eq(1)').prop('selected', true);
    $('input[name=commit').click()
  });
<% else %>
  $('#age-sort').click(function() {
    $('select#q_s_0_name>option:eq(1)').prop('selected', true);
    $('input[name=commit').click()
  });

  $('#name-sort').click(function() {
    $('select#q_s_0_name>option:eq(2)').prop('selected', true);
    $('input[name=commit').click()
  });
<% end %>
